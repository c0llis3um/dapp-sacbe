{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jalcantara/Downloads/eth-dev/sacbe-eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/jalcantara/Downloads/eth-dev/sacbe-eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/jalcantara/Downloads/eth-dev/sacbe-eth-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useCallback,useEffect,useState}from\"react\";import{Contract}from\"@ethersproject/contracts\";import{Web3Provider,getDefaultProvider}from\"@ethersproject/providers\";import{useQuery}from\"@apollo/react-hooks\";import{Body,Button,Header,Image,Link}from\"./components\";import{web3Modal,logoutOfWeb3Modal}from'./utils/web3Modal';import logo from\"./ethereumLogo.png\";import{addresses,abis}from\"@project/contracts\";import GET_TRANSFERS from\"./graphql/subgraph\";function readOnChainData(){return _readOnChainData.apply(this,arguments);}function _readOnChainData(){_readOnChainData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var defaultProvider,ceaErc20,tokenBalance;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Should replace with the end-user wallet, e.g. Metamask\ndefaultProvider=getDefaultProvider();// Create an instance of an ethers.js Contract\n// Read more about ethers.js on https://docs.ethers.io/v5/api/contract/contract/\nceaErc20=new Contract(addresses.ceaErc20,abis.erc20,defaultProvider);// A pre-defined address that owns some CEAERC20 tokens\n_context2.next=4;return ceaErc20.balanceOf(\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\");case 4:tokenBalance=_context2.sent;console.log({tokenBalance:tokenBalance.toString()});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _readOnChainData.apply(this,arguments);}function WalletButton(_ref){var provider=_ref.provider,loadWeb3Modal=_ref.loadWeb3Modal;return/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){if(!provider){loadWeb3Modal();}else{logoutOfWeb3Modal();}}},!provider?\"Connect Wallet\":\"Disconnect Wallet\");}function App(){var _useQuery=useQuery(GET_TRANSFERS),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data,account=_useQuery.account,active=_useQuery.active;var _useState=useState(),_useState2=_slicedToArray(_useState,2),provider=_useState2[0],setProvider=_useState2[1];/* Open wallet selection modal. */var loadWeb3Modal=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newProvider;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return web3Modal.connect();case 2:newProvider=_context.sent;setProvider(new Web3Provider(newProvider));case 4:case\"end\":return _context.stop();}}},_callee);})),[]);/* If user has loaded a wallet before, load it automatically. */useEffect(function(){if(web3Modal.cachedProvider){loadWeb3Modal();}},[loadWeb3Modal]);React.useEffect(function(){if(!loading&&!error&&data&&data.transfers){console.log({transfers:data.transfers});}},[loading,error,data]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(WalletButton,{provider:provider,loadWeb3Modal:loadWeb3Modal})));}export default App;","map":{"version":3,"sources":["/Users/jalcantara/Downloads/eth-dev/sacbe-eth-app/packages/react-app/src/App.js"],"names":["React","useCallback","useEffect","useState","Contract","Web3Provider","getDefaultProvider","useQuery","Body","Button","Header","Image","Link","web3Modal","logoutOfWeb3Modal","logo","addresses","abis","GET_TRANSFERS","readOnChainData","defaultProvider","ceaErc20","erc20","balanceOf","tokenBalance","console","log","toString","WalletButton","provider","loadWeb3Modal","App","loading","error","data","account","active","setProvider","connect","newProvider","cachedProvider","transfers"],"mappings":"qfAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,QAAxC,KAAwD,OAAxD,CACA,OAASC,QAAT,KAAyB,0BAAzB,CACA,OAASC,YAAT,CAAuBC,kBAAvB,KAAiD,0BAAjD,CACA,OAASC,QAAT,KAAyB,qBAAzB,CAEA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,MAAvB,CAA+BC,KAA/B,CAAsCC,IAAtC,KAAkD,cAAlD,CACA,OAASC,SAAT,CAAoBC,iBAApB,KAA6C,mBAA7C,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CAEA,OAASC,SAAT,CAAoBC,IAApB,KAAgC,oBAAhC,CACA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,C,QAEeC,CAAAA,e,uJAAf,kLACE;AACMC,eAFR,CAE0Bd,kBAAkB,EAF5C,CAGE;AACA;AACMe,QALR,CAKmB,GAAIjB,CAAAA,QAAJ,CAAaY,SAAS,CAACK,QAAvB,CAAiCJ,IAAI,CAACK,KAAtC,CAA6CF,eAA7C,CALnB,CAME;AANF,uBAO6BC,CAAAA,QAAQ,CAACE,SAAT,CAAmB,4CAAnB,CAP7B,QAOQC,YAPR,gBAQEC,OAAO,CAACC,GAAR,CAAY,CAAEF,YAAY,CAAEA,YAAY,CAACG,QAAb,EAAhB,CAAZ,EARF,wD,kDAWA,QAASC,CAAAA,YAAT,MAAmD,IAA3BC,CAAAA,QAA2B,MAA3BA,QAA2B,CAAjBC,aAAiB,MAAjBA,aAAiB,CACjD,mBACE,oBAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACb,GAAI,CAACD,QAAL,CAAe,CACbC,aAAa,GACd,CAFD,IAEO,CACLhB,iBAAiB,GAClB,CACF,CAPH,EASG,CAACe,QAAD,CAAY,gBAAZ,CAA+B,mBATlC,CADF,CAaD,CAED,QAASE,CAAAA,GAAT,EAAe,eACqCxB,QAAQ,CAACW,aAAD,CAD7C,CACLc,OADK,WACLA,OADK,CACIC,KADJ,WACIA,KADJ,CACWC,IADX,WACWA,IADX,CACiBC,OADjB,WACiBA,OADjB,CAC0BC,MAD1B,WAC0BA,MAD1B,eAEoBjC,QAAQ,EAF5B,wCAEN0B,QAFM,eAEIQ,WAFJ,eAIb,kCACA,GAAMP,CAAAA,aAAa,CAAG7B,WAAW,sEAAC,yKACNY,CAAAA,SAAS,CAACyB,OAAV,EADM,QAC1BC,WAD0B,eAEhCF,WAAW,CAAC,GAAIhC,CAAAA,YAAJ,CAAiBkC,WAAjB,CAAD,CAAX,CAFgC,sDAAD,GAG9B,EAH8B,CAAjC,CAKA,gEACArC,SAAS,CAAC,UAAM,CACd,GAAIW,SAAS,CAAC2B,cAAd,CAA8B,CAC5BV,aAAa,GACd,CACF,CAJQ,CAIN,CAACA,aAAD,CAJM,CAAT,CAMA9B,KAAK,CAACE,SAAN,CAAgB,UAAM,CACpB,GAAI,CAAC8B,OAAD,EAAY,CAACC,KAAb,EAAsBC,IAAtB,EAA8BA,IAAI,CAACO,SAAvC,CAAkD,CAChDhB,OAAO,CAACC,GAAR,CAAY,CAAEe,SAAS,CAAEP,IAAI,CAACO,SAAlB,CAAZ,EACD,CACF,CAJD,CAIG,CAACT,OAAD,CAAUC,KAAV,CAAiBC,IAAjB,CAJH,EAMA,mBACE,4CAEE,oBAAC,MAAD,mBACE,oBAAC,YAAD,EAAc,QAAQ,CAAEL,QAAxB,CAAkC,aAAa,CAAEC,aAAjD,EADF,CAFF,CADF,CAQD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { Web3Provider, getDefaultProvider } from \"@ethersproject/providers\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport { Body, Button, Header, Image, Link } from \"./components\";\nimport { web3Modal, logoutOfWeb3Modal } from './utils/web3Modal'\nimport logo from \"./ethereumLogo.png\";\n\nimport { addresses, abis } from \"@project/contracts\";\nimport GET_TRANSFERS from \"./graphql/subgraph\";\n\nasync function readOnChainData() {\n  // Should replace with the end-user wallet, e.g. Metamask\n  const defaultProvider = getDefaultProvider();\n  // Create an instance of an ethers.js Contract\n  // Read more about ethers.js on https://docs.ethers.io/v5/api/contract/contract/\n  const ceaErc20 = new Contract(addresses.ceaErc20, abis.erc20, defaultProvider);\n  // A pre-defined address that owns some CEAERC20 tokens\n  const tokenBalance = await ceaErc20.balanceOf(\"0x3f8CB69d9c0ED01923F11c829BaE4D9a4CB6c82C\");\n  console.log({ tokenBalance: tokenBalance.toString() });\n}\n\nfunction WalletButton({ provider, loadWeb3Modal }) {\n  return (\n    <Button\n      onClick={() => {\n        if (!provider) {\n          loadWeb3Modal();\n        } else {\n          logoutOfWeb3Modal();\n        }\n      }}\n    >\n      {!provider ? \"Connect Wallet\" : \"Disconnect Wallet\"}\n    </Button>\n  );\n}\n\nfunction App() {\n  const { loading, error, data, account, active } = useQuery(GET_TRANSFERS);\n  const [provider, setProvider,] = useState();\n\n  /* Open wallet selection modal. */\n  const loadWeb3Modal = useCallback(async () => {\n    const newProvider = await web3Modal.connect();\n    setProvider(new Web3Provider(newProvider));\n  }, []);\n\n  /* If user has loaded a wallet before, load it automatically. */\n  useEffect(() => {\n    if (web3Modal.cachedProvider) {\n      loadWeb3Modal();\n    }\n  }, [loadWeb3Modal]);\n\n  React.useEffect(() => {\n    if (!loading && !error && data && data.transfers) {\n      console.log({ transfers: data.transfers });\n    }\n  }, [loading, error, data]);\n\n  return (\n    <div>\n\n      <Header>\n        <WalletButton provider={provider} loadWeb3Modal={loadWeb3Modal} />\n      </Header>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}